<!--设置页面-->
<view class="settings-container">
  <!-- 页面标题 -->
  <view class="page-header">
    <view class="page-title">⚙️ 设置</view>
    <view class="page-subtitle">个性化你的学习体验</view>
  </view>

  <!-- 用户信息设置 -->
  <view class="settings-section">
    <view class="section-title">
      <text class="icon">👤</text>
      <text>个人信息</text>
    </view>
    
    <view class="settings-card">
      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">小朋友年龄</text>
          <text class="label-desc">根据年龄调整学习内容</text>
        </view>
        <picker mode="selector" range="{{ageOptions}}" value="{{ageIndex}}" bindchange="onAgeChange">
          <view class="picker-display">
            {{ageOptions[ageIndex]}}岁
            <text class="picker-arrow">></text>
          </view>
        </picker>
      </view>

      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">学习难度</text>
          <text class="label-desc">选择适合的学习难度</text>
        </view>
        <picker mode="selector" range="{{difficultyOptions}}" value="{{difficultyIndex}}" bindchange="onDifficultyChange">
          <view class="picker-display">
            {{difficultyOptions[difficultyIndex]}}
            <text class="picker-arrow">></text>
          </view>
        </picker>
      </view>

      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">AI性格</text>
          <text class="label-desc">选择AI老师的性格风格</text>
        </view>
        <picker mode="selector" range="{{personalityOptions}}" value="{{personalityIndex}}" bindchange="onPersonalityChange">
          <view class="picker-display">
            {{personalityOptions[personalityIndex]}}
            <text class="picker-arrow">></text>
          </view>
        </picker>
      </view>
    </view>
  </view>

  <!-- 学习设置 -->
  <view class="settings-section">
    <view class="section-title">
      <text class="icon">📚</text>
      <text>学习设置</text>
    </view>
    
    <view class="settings-card">
      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">语音功能</text>
          <text class="label-desc">开启语音对话和发音</text>
        </view>
        <switch checked="{{voiceEnabled}}" bindchange="onVoiceToggle" color="#FF6B9D" />
      </view>

      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">自动语音聊天</text>
          <text class="label-desc">AI主动发起语音对话</text>
        </view>
        <switch checked="{{autoVoiceEnabled}}" bindchange="onAutoVoiceToggle" color="#FF6B9D" />
      </view>

      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">自动播放</text>
          <text class="label-desc">AI回复自动播放语音</text>
        </view>
        <switch checked="{{autoPlay}}" bindchange="onAutoPlayToggle" color="#FF6B9D" />
      </view>

      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">学习提醒</text>
          <text class="label-desc">每日学习提醒</text>
        </view>
        <switch checked="{{learningReminder}}" bindchange="onReminderToggle" color="#FF6B9D" />
      </view>

      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">每日目标</text>
          <text class="label-desc">设置每日学习次数</text>
        </view>
        <picker mode="selector" range="{{targetOptions}}" value="{{targetIndex}}" bindchange="onTargetChange">
          <view class="picker-display">
            {{targetOptions[targetIndex]}}次
            <text class="picker-arrow">></text>
          </view>
        </picker>
      </view>
    </view>
  </view>

  <!-- 界面设置 -->
  <view class="settings-section">
    <view class="section-title">
      <text class="icon">🎨</text>
      <text>界面设置</text>
    </view>
    
    <view class="settings-card">
      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">主题色彩</text>
          <text class="label-desc">选择你喜欢的颜色</text>
        </view>
        <view class="theme-selector">
          <view wx:for="{{themeOptions}}" wx:key="value" 
                class="theme-option {{theme === item.value ? 'active' : ''}}"
                bindtap="onThemeChange" 
                data-theme="{{item.value}}"
                style="background-color: {{item.color}}">
            <text class="theme-name">{{item.name}}</text>
          </view>
        </view>
      </view>

      <view class="setting-item">
        <view class="setting-label">
          <text class="label-text">字体大小</text>
          <text class="label-desc">调整文字大小</text>
        </view>
        <view class="font-size-selector">
          <view wx:for="{{fontSizeOptions}}" wx:key="value" 
                class="font-option {{fontSize === item.value ? 'active' : ''}}"
                bindtap="onFontSizeChange" 
                data-size="{{item.value}}">
            <text class="font-preview" style="font-size: {{item.size}}rpx;">Aa</text>
            <text class="font-label">{{item.label}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 学习统计 -->
  <view class="settings-section">
    <view class="section-title">
      <text class="icon">📊</text>
      <text>学习统计</text>
    </view>
    
    <view class="stats-card">
      <view class="stats-grid">
        <view class="stat-item">
          <view class="stat-number">{{totalScore}}</view>
          <view class="stat-label">总分数</view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{streak}}</view>
          <view class="stat-label">连续天数</view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{totalPractice}}</view>
          <view class="stat-label">总练习</view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{currentLevel}}</view>
          <view class="stat-label">当前等级</view>
        </view>
      </view>
      
      <button class="btn-secondary reset-btn" bindtap="resetProgress">
        <text class="icon">🔄</text>
        <text>重置进度</text>
      </button>
    </view>
  </view>

  <!-- 其他设置 -->
  <view class="settings-section">
    <view class="section-title">
      <text class="icon">ℹ️</text>
      <text>其他</text>
    </view>
    
    <view class="settings-card">
      <view class="setting-item" bindtap="showAbout">
        <view class="setting-label">
          <text class="label-text">关于我们</text>
          <text class="label-desc">了解AI英语小助教</text>
        </view>
        <text class="arrow">></text>
      </view>

      <view class="setting-item" bindtap="showHelp">
        <view class="setting-label">
          <text class="label-text">使用帮助</text>
          <text class="label-desc">学习如何使用应用</text>
        </view>
        <text class="arrow">></text>
      </view>

      <view class="setting-item" bindtap="contactUs">
        <view class="setting-label">
          <text class="label-text">联系我们</text>
          <text class="label-desc">反馈问题或建议</text>
        </view>
        <text class="arrow">></text>
      </view>

      <view class="setting-item" bindtap="shareApp">
        <view class="setting-label">
          <text class="label-text">分享应用</text>
          <text class="label-desc">推荐给其他小朋友</text>
        </view>
        <text class="arrow">></text>
      </view>
    </view>
  </view>

  <!-- 保存按钮 -->
  <view class="save-section">
    <button class="btn-primary save-btn" bindtap="saveSettings">
      <text class="icon">💾</text>
      <text>保存设置</text>
    </button>
  </view>
</view>
