<!--ä¸ªäººèµ„æ–™é¡µé¢-->
<view class="profile-container">
  <!-- ç”¨æˆ·å¤´åƒåŒºåŸŸ -->
  <view class="profile-header">
    <view class="avatar-section">
      <image class="user-avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <button class="avatar-edit-btn" bindtap="changeAvatar">ğŸ“·</button>
    </view>
    <view class="user-info">
      <view class="username">{{userInfo.nickName || 'å°æœ‹å‹'}}</view>
      <view class="user-level">
        <text class="level-badge">Lv.{{currentLevel}}</text>
        <text class="level-progress">{{levelProgress}}/100</text>
      </view>
    </view>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="section-title">
      <text class="icon">ğŸ“Š</text>
      <text>å­¦ä¹ ç»Ÿè®¡</text>
    </view>
    
    <view class="stats-grid">
      <view class="stat-card">
        <view class="stat-icon">ğŸ†</view>
        <view class="stat-number">{{totalScore}}</view>
        <view class="stat-label">æ€»åˆ†æ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-icon">ğŸ”¥</view>
        <view class="stat-number">{{streak}}</view>
        <view class="stat-label">è¿ç»­å¤©æ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-icon">ğŸ’¬</view>
        <view class="stat-number">{{totalPractice}}</view>
        <view class="stat-label">å¯¹è¯æ¬¡æ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-icon">ğŸ“š</view>
        <view class="stat-number">{{learnedWords}}</view>
        <view class="stat-label">å­¦ä¼šå•è¯</view>
      </view>
    </view>
  </view>

  <!-- æˆå°±å±•ç¤º -->
  <view class="achievements-section">
    <view class="section-title">
      <text class="icon">ğŸ…</text>
      <text>å­¦ä¹ æˆå°±</text>
    </view>
    
    <view class="achievements-grid">
      <view wx:for="{{achievements}}" wx:key="id" class="achievement-item {{item.unlocked ? 'unlocked' : 'locked'}}">
        <view class="achievement-icon">{{item.icon}}</view>
        <view class="achievement-name">{{item.name}}</view>
        <view class="achievement-progress" wx:if="{{!item.unlocked}}">
          {{item.progress}}/{{item.target}}
        </view>
      </view>
    </view>
  </view>

  <!-- å­¦ä¹ æ—¥å† -->
  <view class="calendar-section">
    <view class="section-title">
      <text class="icon">ğŸ“…</text>
      <text>å­¦ä¹ æ—¥å†</text>
    </view>
    
    <view class="calendar-header">
      <button class="calendar-nav" bindtap="prevMonth">â€¹</button>
      <view class="calendar-title">{{currentMonth}}</view>
      <button class="calendar-nav" bindtap="nextMonth">â€º</button>
    </view>
    
    <view class="calendar-grid">
      <view wx:for="{{calendarDays}}" wx:key="*this" class="calendar-day {{item.hasPractice ? 'has-practice' : ''}} {{item.isToday ? 'today' : ''}}">
        <view class="day-number">{{item.day}}</view>
        <view wx:if="{{item.hasPractice}}" class="practice-indicator">â—</view>
      </view>
    </view>
  </view>

  <!-- å­¦ä¹ è®°å½• -->
  <view class="records-section">
    <view class="section-title">
      <text class="icon">ğŸ“</text>
      <text>æœ€è¿‘å­¦ä¹ </text>
    </view>
    
    <view class="records-list">
      <view wx:for="{{recentRecords}}" wx:key="id" class="record-item">
        <view class="record-icon">{{item.icon}}</view>
        <view class="record-content">
          <view class="record-title">{{item.title}}</view>
          <view class="record-desc">{{item.description}}</view>
          <view class="record-time">{{item.time}}</view>
        </view>
        <view class="record-score">+{{item.score}}</view>
      </view>
    </view>
  </view>

  <!-- å­¦ä¹ ç›®æ ‡ -->
  <view class="goals-section">
    <view class="section-title">
      <text class="icon">ğŸ¯</text>
      <text>å­¦ä¹ ç›®æ ‡</text>
    </view>
    
    <view class="goals-list">
      <view wx:for="{{goals}}" wx:key="id" class="goal-item">
        <view class="goal-info">
          <view class="goal-title">{{item.title}}</view>
          <view class="goal-progress">
            <view class="progress-bar">
              <view class="progress-fill" style="width: {{item.progress}}%"></view>
            </view>
            <view class="progress-text">{{item.current}}/{{item.target}}</view>
          </view>
        </view>
        <view class="goal-status">
          <text wx:if="{{item.completed}}" class="completed">âœ…</text>
          <text wx:else class="pending">{{item.progress}}%</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <button class="action-btn" bindtap="startPractice">
      <text class="btn-icon">ğŸ¤</text>
      <text class="btn-text">å¼€å§‹ç»ƒä¹ </text>
    </button>
    <button class="action-btn" bindtap="viewProgress">
      <text class="btn-icon">ğŸ“ˆ</text>
      <text class="btn-text">æŸ¥çœ‹è¿›åº¦</text>
    </button>
    <button class="action-btn" bindtap="shareProgress">
      <text class="btn-icon">ğŸ“¤</text>
      <text class="btn-text">åˆ†äº«æˆç»©</text>
    </button>
  </view>
</view>
